package br.com.tecnicabriquete.jdbc;

import com.sun.tools.javac.util.List;

import br.com.tecnicabriquete.modelo.Funcionario;

public class JDBCFuncionarioDAO {

	public List<Funcionario> buscar() {
		//Criação da instrução SQL para busca de todas as marcas
				String comando = "SELECT * FROM funcionario";
				
				
				//Criação de uma lista para armazenar cada marca encontrada
				List<Marca> listMarcas = new ArrayList<Marca>();
				
				//Criação do objeto marca com valor null (ou seja, sem instanciá-lo)
				Marca marca = null;
				
				//Abertura do try-catch
				
				try {
					
					//Uso da conexão do banco para prepará-lo par auma instrução SQL
					
					Statement stmt = conexao.createStatement();
					
					//Execução da instrução criada previamente
					//e armazenamento do resultado no objeto rs
					
					ResultSet rs = stmt.executeQuery(comando);
					
					//Enquanto houver uma próxima linha no resultado
					while(rs.next()) {
						
						//Criação de instância de classe Marca
						marca = new Marca();
						
						//Recebimento dos 2 dados retornados do BD para cada linha encontrada
						int id = rs.getInt("id");
						String nome = rs.getString("nome");
						int status = rs.getInt("status");
						
						//Setando no objeto marca os valores encontrados
						marca.setStatus(status);
						
						if(marca.getStatus() == 0) {
							System.out.println("marca com status 0 pulada");
						}else {
							marca.setId(id); // POR QUESTÕES DE ECONOMIA DE PROCESSAMENTO VEM PRO ELSE 
							marca.setNome(nome);
							listMarcas.add(marca);
						}
					}
					
					
					//Caso alguma Exception seja gerada no Try, recebe-a no objeto "ex"
				}catch(Exception ex) {
					//Exibe a exceção na console
					ex.printStackTrace();
				}
				
				
				return listMarcas;
	}

}
